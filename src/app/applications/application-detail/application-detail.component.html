<div class="application-detail" id="anchor-point">
  <div class="container" *ngIf="application" id="anchor-point">
    <div class="row">
      <main class="col-lg-5 application-tombstone">
        <section>
          <div class="item organization-item">
            <p>{{application.client || '-'}}</p>
          </div>

          <div class="item">
            <div class="row">
              <div class="col">
                <span class="badge" [ngClass]="{'badge-primary' : commentPeriodService.getStatus(application.currentPeriod) === commentPeriodService.commentStatuses['NOT STARTED'],
                            'badge-secondary' : commentPeriodService.getStatus(application.currentPeriod) === commentPeriodService.commentStatuses['NOT OPEN'],
                            'badge-danger' : commentPeriodService.getStatus(application.currentPeriod) === commentPeriodService.commentStatuses['CLOSED'],
                            'badge-success' : commentPeriodService.getStatus(application.currentPeriod) === commentPeriodService.commentStatuses['OPEN']}">
                  {{commentPeriodService.getStatus(application.currentPeriod)}}
                </span>
              </div>
            </div>
            <div class="row">
              <div class="col">
                <p class="title">{{applicationService.getStatus(application)}}</p>
              </div>
            </div>
            <div class="row">
              <div class="col-6">
                <label>Purpose</label>
                <p class="value">{{application.purpose || "-" | titlecase}}</p>
              </div>
              <div class="col-6">
                <label>Subpurpose</label>
                <p class="value">{{application.subpurpose || "-" | titlecase}}</p>
              </div>
              <div class="col-6">
                <label>Tenure Type</label>
                <p class="value">{{application.type || "-" | titlecase}}</p>
              </div>
              <div class="col-6">
                <label>Tenure Subtype</label>
                <p class="value">{{application.subtype || "-" | titlecase}}</p>
              </div>
            </div>
          </div>

          <section class="item map-thumbnail card p-0">
              <div class="map-container">
                  <div class="map" id="map"></div>
              </div>
          </section>

          <div class="item row">
            <div class="col-12">
              <label>GEOGRAPAHIC SHAPE INFORMATION</label>
              <div *ngIf="application.features">This application has
              <strong>{{application.features.length}}</strong> shape {{application.features.length === 1 ? 'file' : 'files'}}.<hr></div>
            </div>
            <div class="col-6">
              <label>Total Area (ha)</label>
              <p class="value">{{application.areaHectares ? (application.areaHectares | number:'1.2-2') : '-'}}</p>
            </div>
            <div class="col-6">
              <label>Location</label>
              <p class="value">{{application.location || "-"}}</p>
            </div>
            <div class="col-6">
              <label>Region</label>
              <p class="value">{{application.region || "-"}}</p>
            </div>
            <div class="col-6">
              <label>Agency</label>
              <p class="value">Crown Lands Allocation</p>
            </div>
          </div>

          <div class="item row" *ngFor="let feature of application.features">
            <div class="col-6">
              <label>Interest ID</label>
              <p class="value">{{feature.properties.INTRID_SID}}</p>
            </div>
            <div class="col-6">
                <label>Area (ha)</label>
                <p class="value">{{feature.properties.TENURE_AREA_IN_HECTARES ? (feature.properties.TENURE_AREA_IN_HECTARES | number:'1.2-2') : '-'}}</p>
            </div>
            <div class="col-12">
              <label>Legal Description</label>
              <p class="value">{{feature.properties.TENURE_LEGAL_DESCRIPTION}}</p>
            </div>
          </div>

          <div class="item row">
            <div class="col-6">
              <label>Crown Land File</label>
              <p class="value">{{application.cl_files ? application.cl_files.join(", ") : "-"}}</p>
            </div>
            <div class="col-6">
              <label>Disposition ID</label>
              <p class="value">{{application.tantalisID || "-"}}</p>
            </div>
          </div>
        </section>
      </main>

      <!-- TODO: instead of the tabs, this could be a map -->
      <aside class="col-lg-7 application-tabs">
        <button class="btn btn-warning" (click)="addComment()" *ngIf="commentPeriodService.isOpen(application.currentPeriod)">Submit a Comment</button>
        <section>
          <div role="navigation">
            <ul class="nav nav-tabs" role="tablist">
              <li class="nav-item" role="presentation" *ngFor="let tabLink of tabLinks">
                <a class="nav-link" role="tab" [routerLink]="tabLink.link" [replaceUrl]="true" routerLinkActive #rla="routerLinkActive" [class.active]="rla.isActive">{{tabLink.label}}</a>
              </li>
            </ul>
          </div>

          <router-outlet></router-outlet>

        </section>
      </aside>
    </div>
  </div>
</div>