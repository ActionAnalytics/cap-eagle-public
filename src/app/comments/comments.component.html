<div class="comments">
    <div class="spinner-container" *ngIf="loading">
        <div class="spinner-new rotating"></div>
    </div>
    <div class="header-section m-4">
        <h1>
            {{commentPeriodHeader}}
        </h1>
        <h2>
            {{commentPeriod.dateStarted | date:'mediumDate'}} - {{commentPeriod.dateCompleted | date:'mediumDate'}}
        </h2>
        <p>
            This Public Comment Period is regarding the <b>{{commentPeriod.informationLabel}}</b>
        </p>
    </div>
    
    <div class="comment-section mx-4">
        <div *ngIf="comments?.length === 0">
            <em>No comments have been received for this project at this time.</em>
        </div>
        <ng-template ngFor let-item [ngForOf]="comments | paginate: { id: 'server', itemsPerPage: commentPeriod.pageSize, currentPage: commentPeriod.currentPage, totalItems: totalComments }">
            <div class="list-group-item flex-column align-items-start">
                <div class="d-flex w-100 justify-content-between">
                    <div class="comment__author">
                        <div *ngIf="item.author && item.Anonymous !== true; else anonymous">
                            <span>{{item.author}}</span>
                            <span *ngIf="item.location">, {{item.location}}</span>
                        </div>
                        <ng-template #anonymous>
                            <em>Anonymous</em>
                        </ng-template>
                    </div>
                    <div class="comment__date">
                        {{(item.dateAdded | date:'longDate') || "-"}}
                    </div>
                </div>
                <p class="comment__text">{{item.comment}}</p>
                <div class="comment__buttons ">
                    <div class="clickable" (click)="viewDetails(item._id)">Read More &nbsp; &rsaquo;</div>
                </div>
            </div>
        </ng-template>
        <div class="page-controls">
            <div class="spinner" [ngClass]="{ 'hidden': !commentsLoading }"></div>
            <pagination-controls (pageChange)="getPaginatedComments($event)" id="server"></pagination-controls>
        </div>
    </div>
</div>